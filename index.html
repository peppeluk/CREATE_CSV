<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Generatore CSV Articoli</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1>Generatore CSV per importazione articoli, ordini a fornitore e listini di vendita</h1>
    <p class="subtitle">Incolla le colonne, valida i dati e genera il CSV formattato</p>
  </header>

  <!-- ================= DATI GLOBALI ================= -->
  <section class="panel">
    <h2>1Ô∏è‚É£ Dati globali</h2>

    <label class="field">
      <span>Codice Fornitore</span>
      <input type="text" id="fornitore" placeholder="Es. 100648" oninput="autosave(); update();">
    </label>
  </section>

  <!-- ================= CARICA FILE ================= -->
  <section class="panel">
    <h2>2Ô∏è‚É£ Carica file CSV (opzionale)</h2>
    
    <p style="font-size: 0.9em; color: #666;">
      <strong>Nota:</strong> Se hai un file Excel (.XLSX), convertilo in CSV prima di caricarlo 
      (File ‚Üí Esporta come ‚Üí CSV in Excel)
    </p>
    
    <label class="field">
      <span>Seleziona file CSV</span>
      <input type="file" id="fileInput" accept=".csv" />
    </label>

    <div id="mappingArea" style="display: none;">
      <h3>Mappa le colonne del file</h3>
      <div id="mappingFields"></div>
      <button id="applyMapping">Applica mappatura</button>
    </div>

    <div id="filePreview" style="display: none;">
      <h3>Anteprima righe</h3>
      <table id="previewTable" style="border-collapse: collapse; width: 100%; font-size: 0.9em;">
        <thead id="previewHead"></thead>
        <tbody id="previewBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ================= COLONNE ================= -->
  <section class="panel">
    <h2>3Ô∏è‚É£ Incolla colonne</h2>

    <label class="field">
      <span>Codice Articolo</span>
      <textarea id="codice" placeholder="Una riga = un articolo" oninput="autosave(); update();"></textarea>
    </label>

    <label class="field">
      <span>Descrizione articolo</span>
      <textarea id="descrizione" placeholder="Max 70 caratteri (35 + 35)" oninput="autosave(); update();"></textarea>
    </label>

    <label class="field">
      <span>Codice a barre</span>
      <textarea id="barcode" placeholder="EAN / Barcode" oninput="autosave(); update();"></textarea>
    </label>

    <label class="field">
      <span>Costo</span>
      <textarea id="costo" placeholder="Numerico (virgola o punto)" oninput="autosave(); update();"></textarea>
    </label>

    <label class="field">
      <span>Quantit√† ordine fornitore</span>
      <textarea id="quantita" placeholder="Numerico (virgola o punto)" oninput="autosave(); update();"></textarea>
    </label>

     <label class="field">
      <span>Prezzo</span>
      <textarea id="prezzo" placeholder="Numerico (virgola o punto)" oninput="autosave(); update();"></textarea>
    </label>

    <div class="info">
      <span id="righeInfo">Righe rilevate: 0</span>
    </div>
  </section>

  <!-- ================= AZIONI ================= -->
  <section class="actions">
    <button id="genera" disabled>
      ‚¨áÔ∏è Genera CSV importazione Articoli
    </button>

    <button id="genera_ordine"  disabled>
   ‚¨áÔ∏è Genera CSV ORDINE FORNITORE
    </button>

    <button id="genera_listino"  disabled>
   ‚¨áÔ∏è Genera CSV LISTINO di vendita
    </button>

    <button id="reset">
      üîÑ Reset
    </button>
  </section>

  <footer>
    <small>generatore CSV per importazione aritcoli su eB
    <br>Creato da Giuseppe Lucchese - 2025    
    </small>

  </footer>
  <script src="storage.js"></script>
  <script src="app.js"></script>
  

</body>
</html>
