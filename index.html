<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Generatore CSV Articoli</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header>
    <h1>Generatore CSV per importazione articoli, ordini a fornitore e listini di vendita</h1>
    <p class="subtitle">Incolla le colonne o importa CSV, valida i dati e genera il CSV formattato</p>
  </header>

  <!-- ================= DATI GLOBALI ================= -->
  <section class="panel">
    <h2>1Ô∏è‚É£ Dati globali</h2>

    <label class="field">
      <span>Codice Fornitore</span>
      <input type="text" id="fornitore" placeholder="Es. 100785 Fornitore generico" oninput="autosave(); update();">
    </label>
  </section>

  <!-- ================= CARICA FILE ================= -->
  <section class="panel">
    <h2>2Ô∏è‚É£ Carica file CSV (opzionale)</h2>

    <p class="note">
      <strong>Nota:</strong> Se hai un file Excel (.XLSX), convertilo in CSV prima di caricarlo.
    </p>

    <label class="field">
      <span>Seleziona file CSV</span>
      <input type="file" id="fileInput" accept=".csv" />
    </label>

    <div id="mappingArea" hidden>
      <h3>Mappa le colonne del file</h3>
      <div id="mappingFields"></div>
      <button id="applyMapping">Applica mappatura</button>
    </div>

    <div id="filePreview" hidden>
      <h3>Anteprima righe</h3>
      <table id="previewTable">
        <thead id="previewHead"></thead>
        <tbody id="previewBody"></tbody>
      </table>
    </div>
  </section>

  <!-- ================= COLONNE ================= -->
  <section class="panel">
    <h2>3Ô∏è‚É£ Incolla colonne</h2>

    <div class="fields-grid">
      <label class="field field--code">
        <span>Codice Articolo</span>
        <textarea id="codice" placeholder="Una riga = un articolo" oninput="autosave(); update();"></textarea>
      </label>

      <label class="field field--description">
        <span>Descrizione articolo</span>
        <textarea id="descrizione" placeholder="Max 70 caratteri (35 + 35)" oninput="autosave(); update();"></textarea>
      </label>

      <label class="field">
        <span>Codice a barre</span>
        <textarea id="barcode" placeholder="EAN / Barcode" oninput="autosave(); update();"></textarea>
      </label>

      <label class="field">
        <span>Costo</span>
        <textarea id="costo" placeholder="Numerico (virgola o punto)" oninput="autosave(); update();"></textarea>
      </label>

      <label class="field">
        <span>Quantit√† ordine fornitore</span>
        <textarea id="quantita" placeholder="Numerico (virgola o punto)" oninput="autosave(); update();"></textarea>
      </label>

      <label class="field">
        <span>Prezzo</span>
        <textarea id="prezzo" placeholder="Numerico (virgola o punto)" oninput="autosave(); update();"></textarea>
      </label>

    </div>

    <div class="info">
      <span id="righeInfo">Righe rilevate: 0</span>
    </div>
  </section>

  <!-- ================= AZIONI ================= -->
  <section class="actions">
    <button id="genera" disabled>‚¨áÔ∏è Genera CSV importazione Articoli</button>
    <button id="genera_ordine" disabled>‚¨áÔ∏è Genera CSV ORDINE FORNITORE</button>
    <button id="genera_listino" disabled>‚¨áÔ∏è Genera CSV LISTINO di vendita</button>
    <button id="reset">üîÑ Reset</button>
    <button type="button" onclick="resetTextareaHeight()" style="margin-left:10px;"> Reset altezza campi</button>
  </section>

  <footer>
    <small>
      Generatore CSV per importazione articoli su eB<br>
      Creato da Giuseppe Lucchese - 2025
    </small>
  </footer>

  <script src="storage.js"></script>
  <script src="app.js"></script>

</body>
</html>
